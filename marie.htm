<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Slidenote-Editor</title>
<link rel="stylesheet" href="marie.css">
<link rel="stylesheet" href="themes/slidenoteguardian.css">
<link rel="stylesheet" href="themes/keyboardshortcuts.css">
<script language="javascript" src="slidenotes.js"></script>
<script language="javascript" src="themes/dialoger.js"></script>
<script language="javascript" src="themes/slidenoteguardian.js"></script>
<script>
var slidenoteguardian;
var slidenote;

//some test-things:
function testinit(){
  return;
    slidenoteguardian.loadedSlidenotes = [{title:"new note",url:"/home/mochilera/Dokumente/jkop/design/marie/editor/marie.htm"},
    {title:"test",url:"dev.slidenotes.io/slidenote/3"},
    {title:"dinosaurier heute",url:"dev.slidenotes.io/slidenotes/dinosaurier"}];
    slidenoteguardian.loadedPresentations = [{title:"test", date:"testdate",id:"10",slidenote:"3",url:"testurl"}];

    menumanager.init();
}

var menumanager = {};
menumanager.menus = new Array();
menumanager.menuByName = function(name){
    for(var x=0;x<this.menus.length;x++)if(this.menus[x].name===name)return this.menus[x];
}
menumanager.buildSlidenoteList = function(){
    if(!slidenoteguardian || !slidenoteguardian.hascmsconnection)return;
    var menudiv = this.menuByName("menuload");
    var menu = document.getElementById("notelist");
    var menuparent = menu.parentElement;
    menu.innerHTML= "";
    var list = slidenoteguardian.loadedSlidenotes;
    for(var x=0;x<list.length;x++){
        var title = list[x].title;
        var url = list[x].url;
        var li=document.createElement("li");
        var del = document.createElement("button");
        var lod = document.createElement("button");
        del.classList.add("circle");
        var delimg = new Image();
        delimg.src = slidenote.imagespath + "/buttons/-.png";
        delimg.alt = "delete slidenote >>>"+title+"";
        del.appendChild(delimg);
        del.targeturl = url+"/delete";
        del.onclick = function(){
            if(confirm("are you shure you want to delete selected slidenote?")){
                location.href=this.targeturl;
            };
        }
        lod.classList.add("loadnotebutton");
        if(url.indexOf(location.pathname)>-1)lod.classList.add("actnotebutton");
        lod.innerText = title;
        lod.url = url;
        lod.onclick = function(){
            //put save-question here
            location.href= this.url;
        }
        li.appendChild(del);
        li.appendChild(lod);
        menu.appendChild(li);
    }

}

menumanager.buildPublishedMenu = function(){
    var list = slidenoteguardian.loadedPresentations;
    var menu = document.getElementById("publishedlist");
    menu.innerHTML = "";
    for(var x=0;x<list.length;x++){
        var delurl = "/node/"+list[x].id+"/delete";
        var title=list[x].title;
        var url = list[x].url;
        var li = document.createElement("li");
        var del = document.createElement("button");
        var lod = document.createElement("button");
        del.classList.add("circle");
        var delimg = new Image();
        delimg.src = "images/buttons/-.png";
        delimg.alt = "delete presentation >>>"+title+"";
        del.appendChild(delimg);
        del.targeturl = delurl;
        del.onclick = function(){
            if(confirm("are you shure you want to delete selected slidenote?")){
                location.href=this.targeturl;
            };
        }
        lod.innerText = list[x].date;
        lod.targeturl = url;
        lod.onclick = function(){
            //TODO: put save question here
            location.href=this.targeturl;
        }
        var cpl = document.createElement("button");
        cpl.classList.add("copylink");
        var cplimg = new Image();
        cplimg.src = "images/buttons/publish.svg";
        cplimg.alt = "copy link of presentation >>>"+title;
        cpl.appendChild(cplimg);
        var cpltext = document.createElement("div");
        cpltext.innerText="copy link";
        cpl.appendChild(cpltext);
        cpl.value = url;
        cpl.onclick = function(){
            var text = this.value;
            var input = document.createElement('input');
            input.setAttribute('value', text);
            document.body.appendChild(input);
            input.select();
            var result = document.execCommand('copy');
            document.body.removeChild(input)
            console.log("copied "+text+" to clipboard:"+result);
        }
        li.appendChild(lod);
        li.appendChild(del);
        li.appendChild(cpl);
        menu.appendChild(li);
    }
}

menumanager.showPresentationOptionsDialog = function(){
  var dialogoptions = {
    type:"dialog",
    title:"slide design",
    content: "design-list",
    closebutton:true,
    cssclass:"presentationoptionsdialog",
    arrownavleftright:true
  };
  dialogoptions.content = this.buildPresentationMenu();
  dialoger.buildDialog(dialogoptions);
};

menumanager.buildPresentationMenu = function(){
  var cssthemes = slidenote.extensions.CssThemes();
  var list = document.createElement("ul");//document.getElementById("basicthemelist");
  list.innerHTML = "";
  for(var x=0;x<cssthemes.length;x++){
    var li = document.createElement("li");
    var title = document.createElement("div");
    title.innerText = cssthemes[x].classname;
    title.classList.add("themepreviewtitle");
    var radio = document.createElement("input");
    radio.type = "radio";
    radio.name = "basictheme";
    radio.value = cssthemes[x].classname;
    radio.tabable = false;
    if(cssthemes[x].active){
      radio.checked = true;
      li.id="presentationoptionactiveradio";
    } else radio.checked=false;
    var preview = document.createElement("div");
    preview.classList.add("themepreview");
    preview.classList.add(cssthemes[x].classname);
    preview.innerHTML="<div>Welcome</div><p>to Slidenotes</p>";
    title.title=cssthemes[x].description;
    radio.title=cssthemes[x].description;
    preview.title=cssthemes[x].description;
    radio.onchange = function(){
      slidenote.extensions.changeThemeStatusByClassname(this.value,this.checked);
      slidenoteguardian.saveConfig("local");
      //set li to active:
      var oldli = document.getElementById("presentationoptionactiveradio");
      if(oldli)oldli.id="";

      this.parentElement.id="presentationoptionactiveradio";
    }
    var previewcontainer = document.createElement("button");
    previewcontainer.classList.add("themepreviewcontainer");
    previewcontainer.appendChild(preview);
    li.appendChild(previewcontainer);
    li.appendChild(radio);
    li.appendChild(title);
    li.onclick = function(e){
      var radio = this.getElementsByTagName("input")[0];
      if(e.target != radio)radio.click();
    }
    list.appendChild(li);
  }
  return list;
}

menumanager.init = function(){
    document.getElementById("presentationoptionsbutton").onclick = function(){
      menumanager.showPresentationOptionsDialog();
    }
    var menus = ["menuload","menucloud","menupublish","menuimportexport", "menuoptionseditor","toolbar", "imagegallery"]; //, "menuoptionspresentation"
    this.standardmenus = menus;
    var menubuttons = ["loadnote","cloud","publishbutton","importexportbutton", "optionsbutton","toolbarbutton", "imagegallerybutton"]; //,"presentationoptionsbutton"
    for(var x=0;x<menus.length;x++){
        var button = document.getElementById(menubuttons[x]);
        var menu = document.getElementById(menus[x]);
        this.menus.push({name:menus[x],menu:menu,button:button});
        button.menu = menus[x];
        menu.button = menubuttons[x];
      //  if(menus[x]==="menuoptionspresentation")button.addEventListener("click",function(){
      //    slidenote.menumanager.buildPresentationMenu();
      //  });
        button.onclick = function(){
            var menus = document.getElementsByClassName("autohidemenu");
            var menu  = document.getElementById(this.menu);
            for(var x=0;x<menus.length;x++)if(menus[x]!=menu){
                menus[x].classList.remove("active");
                if(menus[x].button)
                document.getElementById(menus[x].button).classList.remove("active");
            }
            if(menu===null||menu===undefined)return;
            if(menu.classList.contains("active")){
                menu.classList.remove("active");
                this.classList.remove("active");

            } else{
                if(this.menu==="imagegallery"){
                  slidenote.base64images.buildImageGallery();
                }
                menu.classList.add("active");
                this.classList.add("active");
            }
            var firstbutton = menu.getElementsByClassName("menuitem");
            if(firstbutton.length<1)firstbutton = menu.getElementsByTagName("button");
            if(firstbutton.length<1)return;
            firstbutton[0].focus();
        }
        if(menus[x]!="toolbar"){
            menu.classList.add("autohidemenu");
            //menu.onblur = function(){console.log("test onblur");this.classList.remove("active");};
            //menu.onfocusout = function(){console.log("test onfocusout");this.classList.remove("active");};
        }
    }
    document.getElementsByTagName("textarea")[0].addEventListener("focus",function(event){
        var menus = document.getElementsByClassName("autohidemenu");
        for(var x=0;x<menus.length;x++){
            menus[x].classList.remove("active");
            if(menus[x].button)
            document.getElementById(menus[x].button).classList.remove("active");
        }
    });
    this.buildSlidenoteList();
    var editorsel = document.getElementById("editorchoice");
    editorsel.onkeydown = function(e){if(e.key==="ArrowUp"||e.key==="ArrowDown")e.preventDefault();};
    editorsel.onkeypress = function(e){if(e.key==="ArrowUp"||e.key==="ArrowDown")e.preventDefault();};
    editorsel.onkeyup = function(e){if(e.key==="ArrowUp"||e.key==="ArrowDown")e.preventDefault();};
    //more buttons: night-mode toggle:
    document.getElementById("nightmodetoggle").onclick = function(){
        var sleditor = document.getElementById("slidenoteeditor");
        if(sleditor.classList.contains("nightmode"))
            sleditor.classList.remove("nightmode");
        else sleditor.classList.add("nightmode");
        if(slidenoteguardian){
          slidenoteguardian.saveConfig("local");
        }
    }
    //temporary here to have it available on monday, TODO: delete this part:
    document.getElementById("praesentationrahmen").onkeyup = function(event){
      //Keyboardsteuerung der Slideshow:
      var key=""+event.key;
      console.log("keycode of pressed key:"+key);
      if(key==="Escape")slidenote.presentation.showpresentation();
      if(key==="ArrowRight" || key===" ")presentation.nextPage();
      if(key==="ArrowLeft")presentation.lastPage();
      if(key==="0" ||key==="1" ||key==="2" ||key==="3" ||key==="4" ||key==="5" ||key==="6" ||key==="7" ||key==="8" ||key==="9" ){
        if(presentation.lastpressednrkey==undefined)presentation.lastpressednrkey="";
        presentation.lastpressednrkey+=key;
      }
      if(key==="Enter"){
        presentation.lastpressednrkey--;
        console.log(presentation.lastpressednrkey);
        presentation.showPage(presentation.lastpressednrkey);
        presentation.lastpressednrkey="";
      }
    };

}

function initeditor(){
    //console.log("focus on editor");
    if(slidenote==null){
        var texted = 		document.getElementById("quelltext");
		    var texterr =		 document.getElementById("texteditorerrorlayer");
		    var slideshow = 	document.getElementById("praesentation");
        if(texted===null||texterr==null||slideshow===null){
            console.log("something is missing...");
            setTimeout("initeditor()",500);
            return;
        }else{
            slidenote = new slidenotes(texted,texterr,null,slideshow);
            presentation = slidenote.presentation;
			      texted.onresize= function(){slidenote.parseneu();};
			      texted.onkeydown= function(event){
				          slidenote.keypressdown(event, texted);
			      };
    			texted.onkeyup=function(event){slidenote.keypressup(event, texted);};
    			texted.onpaste=function(){setTimeout('slidenote.parseneu()',150)};
    			texted.oncut=function(){setTimeout('slidenote.parseneu()',150)};
    			//autofocus tonfocus="initeditor(this.value);
    			texted.onscroll=function(){slidenote.scroll(texted);};
    			texted.onclick = function(){console.log("parseneu forced by click"+this.selectionEnd);slidenote.parseneu();};
    			texted.addEventListener("focus",function(){
    				var carret = document.getElementById("carret");
    				if(carret)carret.classList.remove("unfocused");
            var sel = document.getElementsByClassName("selectioncarretmarker");
            if(sel.length===0)return;
            for(var x=sel.length-1;x>=0;x--){
              //sel[x].parentElement.removeChild(sel[x]);
              //sel[x].classList.add("hiddenselectioncarretmarker");
              var seltxt = sel[x].parentElement.innerHTML;
              //console.log(seltxt);
              seltxt = seltxt.replace('<u class="selectioncarretmarker">','');
              seltxt = seltxt.replace('</u>','');
              //console.log("ergebnis:"+seltxt);
              sel[x].parentElement.innerHTML = seltxt;
              //sel[x].classList.remove("selectioncarretmarker");
            }
            //slidenote.parseneu();

    			});
    			texted.addEventListener("focusout",function(){
    				var carret = document.getElementById("carret");
    				if(carret)carret.classList.add("unfocused");
    				//console.log("onblur show carret");
    				//console.log(carret);
            //adding selection-marking:
            var selstart = slidenote.textarea.selectionStart;
            var selend = slidenote.textarea.selectionEnd;
            if(selend-selstart!=0){
              var startline = slidenote.parser.lineAtPosition(selstart);
              var endline = slidenote.parser.lineAtPosition(selend);
              var bglines = document.getElementsByClassName("backgroundline");
              var startpos = selstart - slidenote.parser.map.linestart[startline];
              var endpos = selend - slidenote.parser.map.linestart[endline];
              //set end: (first end because of changes later on)
              /*var changesinline = slidenote.parser.mdcodeeditorchanges[endline];
              var inspos = endpos;
              for(var x=0;x<changesinline.length;x++){
                if(startpos>=changesinline[x].pos){
                  inspos+=changesinline[x].html.length;
                  if(changesinline[x].typ==="<")inspos--;
                }
              }
              var txt = bglines[endline].innerHTML;
              txt = txt.substring(0,inspos)+'<u class="selectioncarretmarker">'+txt.substring(inspos);
              bglines[endline].innerHTML = txt;
              */
              //helper function: do all changes:
              function applychanges(changes, text){
                var txt=text;
                for(var x=0;x<changes.length;x++){
                  txt = txt.substring(0,changes[x].pos)+changes[x].html+txt.substring(changes[x].pos);
                }
                return txt;
              }
              //set start:
              var changesinline = new Array();
              var changesinendline = new Array();
              for(var x=0;x<slidenote.parser.mdcodeeditorchanges.length;x++){
                if(slidenote.parser.mdcodeeditorchanges[x].typ==="cursor")continue;
                if(slidenote.parser.mdcodeeditorchanges[x].line===startline)changesinline.push(slidenote.parser.mdcodeeditorchanges[x]);
                if(slidenote.parser.mdcodeeditorchanges[x].line===endline)changesinendline.push(slidenote.parser.mdcodeeditorchanges[x]);
              }
              var inspos = startpos;
              for(var x=0;x<changesinline.length;x++){
                if(startpos>changesinline[x].pos){
                  inspos+=changesinline[x].html.length;
                  if(changesinline[x].typ==="<")inspos--;
                }
              }
              var txt = bglines[startline].innerHTML;
              if(slidenote.parser.lineswithhtml[startline]==="code")txt = applychanges(changesinline,slidenote.parser.sourcecode.split("\n")[startline]);
              txt = txt.substring(0,inspos)+'<u class="selectioncarretmarker">'+txt.substring(inspos);
              var starthtml = txt;
              txt=bglines[endline].innerHTML;
              if(slidenote.parser.lineswithhtml[endline]==="code")txt = applychanges(changesinline,slidenote.parser.sourcecode.split("\n")[endline]);
              var inspos2 = endpos;
              for(var x=0;x<changesinendline.length;x++){
                var ch = changesinendline[x];
                if(endpos>ch.pos){
                  inspos2+=ch.html.length;
                  if(ch.typ==="<")inspos2--;
                }
              }
              if(startline===endline){
                var carretstart = txt.indexOf('<span id="carret"');
                var carretend = txt.indexOf('</span>',carretstart)+'</span>'.length;
                var carretlength = carretend - carretstart;
                if(carretstart===-1)carretlength=0;
                inspos2+=carretlength;
              }
              txt = txt.substring(0,inspos2)+"</u>"+txt.substring(inspos2);
              if(startline===endline)txt = txt.substring(0,inspos)+'<u class="selectioncarretmarker">'+txt.substring(inspos);
              var endhtml = txt;
              if(startline!=endline){
                starthtml+="</u>";
                bglines[startline].innerHTML = starthtml;
                endhtml = '<u class="selectioncarretmarker">'+endhtml;
              }
              bglines[endline].innerHTML = endhtml;
              //bglines[startline].innerHTML = txt;
              //set in-between:
              if(startline!=endline){
                for(var x=startline+1;x<endline;x++){
                  if(bglines[x].classList.contains("pagebreak")){
                    var pbtxt = bglines[x].innerHTML;
                    pbtxt = '<u class="selectioncarretmarker">---</u>' + pbtxt.substring(3);
                    bglines[x].innerHTML = pbtxt;
                  }else bglines[x].innerHTML = '<u class="selectioncarretmarker">'+bglines[x].innerHTML+'</u>';
                }
              }

            }
    			});
          document.getElementById("importbutton").addEventListener("click",function(){document.getElementById("importfile").click()});
          console.log("slidenote-object created");
          console.log(slidenote);
          slidenote.menumanager = menumanager;
          slidenote.menumanager.init();
          slidenote.extensions.addAfterLoadingThemesHook(function(){
    				slidenoteguardian = new slidenoteGuardian(slidenote);
    			});
      }
    }
}
function insertbutton(code){
	if(slidenote!=null)slidenote.insertbutton(code);
}
</script>

</head><body onload="testinit()">
<div id="slidenotediv">
<div id="slidenoteeditor">
        <button id="cloud">
        <!--  <img id="savestatus" src="images/buttons/cloud.svg"> -->

         <div id="cloud-box">
            <svg viewBox="0 0 34 19" class="cloud-box-element">
        			    <g transform="matrix(1,0,0,1,0.000534427,0.000239369)">
        			        <g transform="matrix(1,0,0,1,-1656.12,-83.708)">
        			            <g class="cloud-shape" transform="matrix(1,0,0,1,1660,82.969)">
        			                <path d="M15.02,0.781C22.037,1.413 22.594,8.451 22.594,8.451C24.925,7.775 27.439,8.739 28.72,10.8C30.925,14.373 29.854,16.472 27.12,17.8C24.386,19.128 3.931,19.343 -0.732,17.8C-5.395,16.257 -4.563,8.77 -0.256,6.491C4.051,4.212 6.208,6.839 6.208,6.839C6.208,6.839 8,0.148 15.02,0.781Z"/>
        			            </g>
        			        </g>
        			    </g>
          	</svg>

          	<!-- nur das div hier beinhält das loading icon -->
          	<div id="cloud-syncing" class="cloud-box-element">
          				<svg viewBox="0 0 34 19">
          					<circle class="loader-path" cx="16" cy="10" r="3.8" fill="none"/>
          				</svg>
          	</div>
              <!-- nur das div hier beinhält den Haken -->
          	<div id="cloud-ok"class="cloud-box-element">
          				<svg viewBox="0 0 34 19">
          					<path id="check-path" d="M10,10 l3,3 l8,-5" />
          				</svg>
          			</div>
              <!-- nur das div hier beinhält das x -->
          	<div id="cloud-error" class="cloud-box-element">
          				<svg viewBox="0 0 34 19">
          					<path id="x-path1" d="M13,14 l8,-7" />
          					<path id="x-path2" d="M13,7 l8,7" />
          				</svg>
          	</div>
            <div id="cloud-undefined" class="cloud-box-element">
                  <div>°</div>
            </div>
          </div>
        </button>
        <button id="loadnote"><div><span id="slidenotetitle">new note</span><img src="images/buttons/loadnotebackground.png"></div></button>
        <button id="outlet">95 Words, 12 Pages,<br> 120 Seconds to read...</button>
    <div id="editorblock">
        <div id="texteditorerrorlayer"></div>
		<textarea spellcheck="false" id="quelltext" onload="" autofocus         onfocus="setTimeout('initeditor()',100);"></textarea>

    </div>
    <div id="buttonarearight">
        <button class="fluidbutton" id="toolbarbutton"><img src="images/buttons/toolbar.png" alt="Toolbar"></button>
        <button class="fluidbutton" id="imagegallerybutton"><img src="images/buttons/imagegallery.png" alt="imagegallery"></button>
        <button class="fluidbutton" id="historyBackButton"><img src="images/buttons/undo.png" alt="undo"></button>
        <button class="fluidbutton" id="historyForwardButton"><img src="images/buttons/redo.png" alt="redo"></button>
    </div>
    <div id="toolbar"><div class="arrow_box" id="texteditorbuttons">
        <div class="screenreader-only">Toolbar</div>
        <ul id="toolbarbuttons">
			<li><button onclick="insertbutton('---')" title="new slide"><span class="buttonmdcode">---</span> new slide</button></li>
			<li><button onclick="insertbutton('%head1')" title="title"><img src="images/buttons/h1.png" alt="Title"><span class="buttonmdcode">#</span> headline</button></li>
			<li><button onclick="insertbutton('*')" title="italic"><img src="images/buttons/italic.png" alt="italic"><span class="buttonmdcode">*</span>italic<span class="buttonmdcode">*</span></button></li>
			<li><button onclick="insertbutton('**')" title="bold"><img src="images/buttons/bold.png" alt="bold"><span class="buttonmdcode">**</span>bold<span class="buttonmdcode">**</span></button></li>
			<li><button onclick="insertbutton('~~')" title="crossed"><img src="images/buttons/stroke.png" alt="stroke"><span class="buttonmdcode">~~</span>deleted<span class="buttonmdcode">~~</span></button></li>
			<li><button onclick="insertbutton('%list')" title="unordered list"><img src="images/buttons/ul.png" alt="list"><span class="buttonmdcode">- </span>list</button></li>
			<li><button onclick="insertbutton('%nrlist')" title="ordered list"><img src="images/buttons/ol.png" alt="ordered list"><span class="buttonmdcode">1. </span>ordered list</button></li>
			<li><button onclick="insertbutton('%quote')" title="quote"><img src="images/buttons/quote.png" alt="quote"><span class="buttonmdcode">&gt; </span>quote</button></li>
			<li><button onclick="insertbutton('%footnote')" title="footnote"><img src="images/buttons/quote.png" alt="footnote"><span class="buttonmdcode">[^*]</span> footnote</button></li>
			<li><button onclick="insertbutton('%comment')" title="comment"><img src="images/buttons/comment.png" alt="comment"><span class="buttonmdcode">//</span> comment</button></li>
			<li><button onclick="insertbutton('%code')" title="code"><img src="images/buttons/code.png" alt="code"><span class="buttonmdcode">`</span>code<span class="buttonmdcode">`</span></button></li>
			<li><button onclick="insertbutton('%link')" title="hyperlink"><img src="images/buttons/link.png" alt="link"><span class="buttonmdcode">[</span>link<span class="buttonmdcode">](url)</span></button></li>

        </ul>
    </div></div>
    <div id="imagegallery">imagegallery</div>
    <div id="optionarea">
      <button id="importexportbutton">
        <!--<img src="images/buttons/import-export.svg"><br>import&<br>export-->
        <!-- file button-->
        <svg viewBox="0 0 31 31" xml:space="preserve">
          <g transform="matrix(1,0,0,1,-192.32,-3812.03)">
            <g transform="matrix(1,0,0,1,0,3479)">
              <g class="meta-button-backgr" transform="matrix(1,0,0,1,-34.2322,0.233)">
                <g class="meta-button-backgr" transform="matrix(1,0,0,1,226.552,332.789)">
                  <circle cx="15.5" cy="15.5" r="15.5"/>
                </g>
                <g class="meta-button-inside" transform="matrix(0.448942,0,0,-0.448942,94.5296,535.038)">
                  <path d="M340.322,402.811C341.319,402.885 341.614,403.002 342.161,403.233C344.107,404.057 345.431,406.041 345.485,408.21L345.485,430.752C345.413,433.623 342.98,436.086 340.079,436.157L323.145,436.157C320.266,436.086 317.811,433.646 317.738,430.752L317.738,408.21C317.914,401.244 330.5,402.508 340.322,402.811ZM323.186,406.145C322.091,406.173 321.166,407.043 321.082,408.143C320.891,415.699 320.891,423.262 321.082,430.818C321.162,431.873 322.022,432.733 323.077,432.813C328.765,432.957 334.458,432.957 340.146,432.813C341.198,432.733 342.061,431.88 342.142,430.818C342.333,423.262 342.333,415.699 342.142,408.143C342.061,407.088 341.202,406.228 340.146,406.148C334.494,406.005 328.839,406.145 323.186,406.145Z"/>
                </g>
                <g transform="matrix(0.465576,0,0,0.448942,86.2266,161.917)">
                  <path d="M342.144,408.33C342.144,407.124 341.2,406.145 340.038,406.145L323.186,406.145C322.023,406.145 321.079,407.124 321.079,408.33L321.079,430.632C321.079,431.837 322.023,432.816 323.186,432.816L340.038,432.816C341.2,432.816 342.144,431.837 342.144,430.632L342.144,408.33Z"/>
                </g>
                <g class="meta-button-inside" transform="matrix(1,0,0,1,23.6993,-3492.53)">
                  <path d="M222.971,3847.89C222.938,3849.18 221.845,3850.28 220.544,3850.31L212.941,3850.31C211.65,3850.28 210.547,3849.18 210.514,3847.89L210.514,3837.66C210.547,3836.36 211.65,3835.26 212.941,3835.23L220.544,3835.23C221.845,3835.26 222.938,3836.36 222.971,3837.66L222.971,3847.89ZM221.534,3842.77C221.534,3841.09 221.512,3839.41 221.47,3837.74C221.434,3837.26 221.048,3836.88 220.574,3836.84C218.037,3836.78 215.498,3836.84 212.96,3836.84C212.468,3836.85 212.053,3837.24 212.015,3837.74C211.973,3839.41 211.951,3841.09 211.951,3842.77C211.951,3844.45 211.973,3846.13 212.015,3847.81C212.053,3848.3 212.468,3848.69 212.96,3848.7C215.498,3848.7 218.037,3848.77 220.574,3848.7C221.048,3848.67 221.434,3848.28 221.47,3847.81C221.512,3846.13 221.534,3844.45 221.534,3842.77Z"/>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <br>file
      </button>
      <button id="publishbutton">
        <!--<img src="images/buttons/publish.svg">-->
        <!-- PUBLISH BUTTON -->
        <svg viewBox="0 0 31 31" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
          <g transform="matrix(1,0,0,1,-235.853,-3812.03)">
            <g transform="matrix(1,0,0,1,0,3479)">
              <g transform="matrix(1,0,0,1,-1459.15,247.022)">
                <g class="meta-button-backgr" transform="matrix(1,0,0,1,1695,86)">
                  <circle cx="15.5" cy="15.5" r="15.5"/>
                </g>
                <g class="meta-button-inside"transform="matrix(1,0,0,1,1459.15,-3726.03)">
                  <path d="M252.751,3822.61C252.733,3822.48 252.724,3822.35 252.724,3822.21C252.724,3820.61 254.028,3819.3 255.635,3819.3C257.241,3819.3 258.546,3820.61 258.546,3822.21C258.546,3823.82 257.241,3825.12 255.635,3825.12C254.716,3825.12 253.895,3824.7 253.362,3824.03C251.402,3825.19 249.401,3826.29 247.412,3827.4C247.552,3827.76 247.629,3828.16 247.629,3828.57C247.629,3828.73 247.618,3828.88 247.597,3829.03C249.51,3830.09 251.39,3831.22 253.283,3832.32C253.812,3831.59 254.669,3831.12 255.635,3831.12C257.241,3831.12 258.546,3832.42 258.546,3834.03C258.546,3835.64 257.241,3836.94 255.635,3836.94C254.028,3836.94 252.724,3835.64 252.724,3834.03C252.724,3833.94 252.728,3833.86 252.735,3833.77C250.806,3832.72 248.915,3831.59 247.015,3830.48C246.42,3831.31 245.449,3831.85 244.354,3831.85C242.546,3831.85 241.079,3830.38 241.079,3828.57C241.079,3826.77 242.546,3825.3 244.354,3825.3C245.189,3825.3 245.952,3825.61 246.53,3826.13C248.58,3824.91 250.675,3823.78 252.751,3822.61Z"/>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <br>publish
      </button>
        <button id="optionsbutton">
          <!--<img src="images/buttons/options.svg">-->
          <!-- OPTIONS BUTTON -->
          <svg viewBox="0 0 31 31" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
              <g transform="matrix(1,0,0,1,-296.175,-3812.62)">
                  <g transform="matrix(1,0,0,1,0,3479)">
                          <g class="meta-button-backgr" transform="matrix(1,0,0,1,296.175,333.617)">
                              <circle cx="15.5" cy="15.5" r="15.5"/>
                          </g>
                          <g class="meta-button-inside" transform="matrix(1,0,0,1,0,-3479)">
                              <path d="M311.588,3820.8C315.458,3820.8 318.6,3823.95 318.6,3827.82C318.6,3831.69 315.458,3834.83 311.588,3834.83C307.718,3834.83 304.576,3831.69 304.576,3827.82C304.576,3823.95 307.718,3820.8 311.588,3820.8ZM311.588,3822.82C314.346,3822.82 316.585,3825.06 316.585,3827.82C316.585,3830.57 314.346,3832.81 311.588,3832.81C308.83,3832.81 306.591,3830.57 306.591,3827.82C306.591,3825.06 308.83,3822.82 311.588,3822.82Z"/>
                          </g>
                  </g>
              </g>
           </svg>
          <br>options
        </button>
    </div>
    <div id="sidebarcontainer">
        <div id="sidebar"></div>
        <div id="nicesidebarsymbol">
          <a id="nicesidebarsymbolcontainer" href="javascript:slidenote.presentation.showInsertMenu();">
            <span id="nicesidebarsymbollabel"></span>
            <img src="images/buttons/droptildeneu.png" alt="open Elements Menu">
          </a>
          <img id="cursorlinearrow" src="images/buttons/cursorlineneu.png">
        </div>
			<div id="insertarea">
          <div id="insertmenulabel" class="screenreader-only"></div>
			    <div id="standardinsertmenu">
					<!--<button class="newpagebutton" onclick="insertbutton('---')" >new Page</button>-->
				</div>
				<div id="extrainsertmenu">
<!-- some test-data:
<button>- </button><button>+ </button><button>* </button><hr><button>1. </button><button>1.) </button><button>1) </button><button>a) </button><button>I) </button>
end test-data-->
				</div>
			</div>

    </div>
    <div id="playbuttonarea">
        <button class="fluidbutton" id="presentationoptionsbutton"><img src="images/buttons/presentation-options.svg"></button>
        <button class="fluidbutton" id="playbutton" onclick="slidenote.presentation.showpresentation()"><img src="images/buttons/play-button.svg"></button>
    </div>
<!-- the menus:-->
    <div id="menucloud"><div class="arrow_box">
        <div>cloud status:<span id="cloudstatus"></span></div>
        <button id="savebutton">save to cloud now</button>
        <button id="addrevision">add revision</button>
        <div class="separator">revert to revision</div>
        <ul id="revisionlist">
<!-- just for testing purpose some elements -->
            <li><button>mon 06-11-19 11:49</button></li>
            <li><button>mon 06-11-19 11:49</button></li>
            <li><button>mon 06-11-19 11:49</button></li>
        </ul>
    </div></div>
    <div id="menuload"><div class="arrow_box">
        <button id="newnote" onclick="slidenoteguardian.createNewSlidenote()"><img src="images/buttons/+.png">+++new slidenote+++</button>
        <ul id="notelist">
            <li><button class="circle"><img src="images/buttons/-.png" alt="delete slidenote new note"></button><button class="loadnotebutton actnotebutton">new note</button></li>
            <li><button class="circle"><img src="images/buttons/-.png"></button><button class="loadnotebutton ">dinosaurs today</button></li>
            <li><button class="circle"><img src="images/buttons/-.png"></button><button class="loadnotebutton ">reading literature in the last century</button></li>
        </ul>
    </div></div>
    <div id="menuoutlet"></div>
    <div id="menupublish"><div class="arrow_box">
        <button id="publishtocms">publish presentation to slidenotes.io</button>
        <div class="separator">published to slidenotes.io</div>
        <ul id="publishedlist">
<!-- some test-data to see structure: -->
            <li>
              <button class="loadnotebutton">mon 06-11-19 11:49</button>
                <button class="circle"><img src="images/buttons/-.png" alt="delete presentation"> delete</button>
                <button class="copylink"><img src="images/buttons/publish.svg" alt="copy link of presentation...">copy link</button>
            </li>
            <li>
              <button class="loadnotebutton">mon 06-11-19 11:00</button>
                <button class="circle"><img src="images/buttons/-.png" alt="delete presentation">delete</button>
                <button class="copylink"><img src="images/buttons/publish.svg" alt="copy link of presentation...">copy link</button>
            </li>
        </ul>
    </div></div>
    <div id="menuimportexport"><div class="arrow_box">
        <button id="importbutton"><div>import slidenote or MD-file</div><input type="file" id="importfile" accept=".slidenote,.txt,.md,.csv"></button>
        <div class="separator">download slidenote as</div>
        <button onclick="slidenoteguardian.saveNote('filesystem')">encrypted .slidenote file</button>
        <button onclick="slidenoteguardian.exportToFilesystem(slidenote.textarea.value, slidenoteguardian.notetitle+'.md')">unencrypted .md/.txt file</button>
        <div class="separator">download presentation as</div>
        <button onclick="slidenoteguardian.exportPresentationLocal(true);">encrypted .html file</button>
        <button onclick="slidenoteguardian.exportPresentationLocal(false);">unencrypted .html file</button>
    </div></div>
    <div id="menuoptionseditor"><div class="arrow_box">
        <a href="/user" class="menuitem">Account</a>
        <a href='/user/logout' class="menuitem">log out</a>
        <div class="separator">night shift</div>
        <button id="nightmodetoggle" class="menuitem"><div>on</div><div>off</div></button>
        <div class="separator">view mode</div>
        <div id="optionmenuinterfacedesign">
                <!--<button id="editorchoicebutton" class="menuitem">-->
				<select id="editorchoice" class="menuitem"  onchange="slidenote.choseEditor(this.value)">
					<option value="md-texteditor" selected>context-mode (default)</option>
					<option value="focus">focus-mode</option>
					<option value="raw-text">raw text</option>
				</select>
                <!--</button>-->
		</div>
        <div class="separator">---</div>
        <button onclick="slidenote.extensions.showThemes()">Advanced Options</button>
        <div class="separator">slidenotes.io service</div>
        <ul>
				<li><a href="#" class="menuitem">tutorials</a></li>
				<li><a href="#" class="menuitem">documentation</a></li>
				<li><a href="#" class="menuitem">bug reports</a></li>
				<li><a href="#" class="menuitem">community</a></li>
			</ul>

    </div></div>
    <div id="menuoptionspresentation"><div class="arrow_box_down">
        <div class="separator">slide design</div>
        <ul id="basicthemelist">
					<li><div>prototype</div><input type="radio" name="basictheme" value="prototype"><div class="prototype"><div>WELCOME</div>TO SLIDENOTES</div></li>
					<li><div>prototype</div><input type="radio" name="basictheme" value="pop"><div class="pop"><div>WELCOME</div> TO SLIDENOTES</div></li>
                    <li><div>prototype</div><input type="radio" name="basictheme" value="coding"><div class="coding"><div>WELCOME</div> TO SLIDENOTES</div></li>
		</ul>
    </div></div>
<!-- only stuff for making shadows and such:-->
    <!-- old stuff(cornerleft)
    <div id="cornerleft"></div>
    <div id="topleft"></div>
    <img id="cornerleftimage" src="images/cornerleftimage.png">
    <div id="topmiddle"></div>
    <div id="noteareaempty"><img src="images/borderleft.png"></div>
    <div id="cornerright"></div>
-->
  <div id="topright"><svg viewBox="0 0 40 40" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
			    <g transform="matrix(1,0,0,1,-1190.49,-3479)">
			        <g transform="matrix(1,0,0,1,0,3479)">
			            <g transform="matrix(1,0,0,1,0,-3479)">
			                <path class="rightcorner" filter="url(#rightcorner-shadow" d="M1230.49,3519L1230.41,3519C1229.09,3497.58 1211.92,3480.41 1190.49,3479.09L1190.49,3479L1230.49,3479L1230.49,3519Z"/>
			                <path class="rightcorner" d="M1230.49,3519L1230.41,3519C1229.09,3497.58 1211.92,3480.41 1190.49,3479.09L1190.49,3479L1230.49,3479L1230.49,3519Z"/>
			            </g>
			        </g>
			    </g>
			    <defs>
			    	<filter id="rightcorner-shadow">
			    		<feOffset result="offOut" in="SourceAlpha" dx="-1" dy="0" />
      					<feGaussianBlur result="blurOut" in="offOut" stdDeviation="4" />
      					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
      					<feComponentTransfer>
    						<feFuncA type="linear" slope="0.3"/>
  						</feComponentTransfer>
        			</filter>
			    </defs>
			</svg></div>
    <div id="shadowelleft"></div>
    <div id="shadowelright"></div>
    <div id="rahmenright"></div>
</div><!--end of slidenoteeditor-div-->
	<div id="praesentationrahmen">
		<div id="praesentation"></div>
		<div class="praesentationsteuerung">
				<input type="button" value="last page please" onclick="presentation.lastPage()">
				<input type="button" value="next page please" onclick="presentation.nextPage()">
				<input type="button" onclick="presentation.showpresentation()" value="hide presentation">
		</div>
	</div>
	<div id="options">
		<h1>Options<button id="optionsclose" onclick="slidenote.extensions.hideThemes()" value="close">close</button></h1>
		<div class="tabbar">
			<h2><a href="javascript:slidenote.extensions.optionsTab(0)">Design Options</a></h2>
			<h2><a href="javascript:slidenote.extensions.optionsTab(1)">Global Options</a></h2>
			<h2><a href="javascript:slidenote.extensions.optionsTab(2)">Extensions</a></h2>
		</div>
		<div id="designoptionstab" class="optiontab"></div>
		<div id="globaloptionstab" class="optiontab"></div>
		<div id="themeselectiontab" class="optiontab"></div>
	</div>

  <div id="imagesblock" class="dialogboxparent">
    <div id="imagesuploadblock" class="dialog_box">
      <h1>Image Upload <button onclick="Javascript:document.getElementById('imagesblock').classList.remove('visible');">close</button></h1>
    <div>
      Select an local image file to upload, then click on image to use it in this slidenote
    </div>
    <div id="imageResizeOptions">
      <input type="radio" name="imageResize" value="1024x768" onchange="slidenote.base64images.changeMaxSize(this.value)"><label>Background/Big (1024x768)</label>
      <input type="radio" name="imageResize" value="400x300" onchange="slidenote.base64images.changeMaxSize(this.value)"><label>Medium (400x300)</label>
      <input type="radio" name="imageResize" value="100x50" onchange="slidenote.base64images.changeMaxSize(this.value)"><label>Icon (100x50)</label>
    </div>
    <div id="filePreview"></div>
    <input type="file" id="fileInput">
    <div id="fileOld"></div>
    </div>
    <div id="imagesreuseblock" class="dialogbox">
      <h1 class="dialogtitle">
        <span>image gallery</span>
        <button class="dialogclosebutton" onclick="document.getElementById('imagesblock').classList.remove('visible');">close <img src="images/buttons/x.png"></button>
      </h1>
      <div id="imageselectionlist" class="dialogboxcontent"></div>
      <div id="imageselectiondialogbuttons">
        <button id="imageselectionuploadbutton" class="plusbutton" title="add image to imagegallery" onclick="document.getElementById('fileInput').value='';slidenote.base64images.uploadmode='imageselection'; document.getElementById('fileInput').click();">
          <img src="images/buttons/+.png">add image
        </button>
        <span>or choose image from gallery</span>
      </div>
    </div>

  </div>

</div><!-- end of slidenotediv-->
<div id="slidenoteloadingscreenwrapper">
  <div id="slidenoteeditorloadingscreen">
    <img id="loadingcircle" src="images/loadingscreen.png">
  </div>
</div>
<div id="slidenoteGuardianPasswordPromptStore">
<div id="slidenoteGuardianPasswordPromptTemplate">
	<div id="slidenoteGuardianPasswordPromptNotetitle">TITLE</div>
	<div id="slidenoteGuardianPasswordPromptTemplatePreText"></div>
	<form onsubmit="event.preventDefault();" action="#" method="POST">
		<label id="slidenoteGuardianPasswordPromptUsernameLabel">FILENAME FOR EXPORT</label>
		<input type="text" id="username">
		<label>PASSWORD</label>
		<input type="password" id="password">
		<label id="slidenoteGuardianPasswordPromptRetypeLabel">RE-TYPE PASSWORD</label>
		<input type="password" id="pwcheckfield">
		<button type="submit" id="slidenoteGuardianPasswordPromptEncrypt">ENCRYPT</button>
		<div id="slidenoteGuardianPasswortPromptAfterText">we recommend using a password manager to keep up with the task of choosing and remembering safe passwords on the web.</div>
	</form>

</div>
</div>
<div id="slidenoteLoadingScreen">
	<h1>Please wait while your presentation is generated...</h1>
	<img src="images/wait-charlie-chaplin.gif" height="80%">
</div>
</body>
</html>
